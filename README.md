# üöó Lamastre-covoit - Site de Covoiturage Local .

Bienvenue dans la documentation du projet de covoiturage local Lamastrois. Cette documentation couvre la planification, la structure des technologies et les mod√®les de donn√©es du backend et du frontend, ainsi que les user stories associ√©es au projet.

## üèó Planification et Architecture du Backend :

### üõ† Technologies Backend :

| #  | Technologie        | Description                                                                                              |
|----|--------------------|----------------------------------------------------------------------------------------------------------|
| 1  | **Node.js**        | üåê Plateforme de d√©veloppement c√¥t√© serveur bas√©e sur le moteur JavaScript V8 de Chrome.                 |
| 2  | **Express.js**     | üöÄ Framework web pour Node.js qui simplifie la cr√©ation de serveurs HTTP.                                |
| 3  | **MySQL**          | üíæ Syst√®me de gestion de base de donn√©es relationnelle pour stocker et g√©rer les donn√©es de l'application. |
| 4  | **Sequelize**      | üîÑ ORM pour Node.js qui prend en charge MySQL, facilitant les interactions avec la base de donn√©es.       |
| 5  | **JWT (JSON Web Tokens)** | üîê Technologie pour la cr√©ation de tokens de session s√©curis√©s afin de g√©rer les sessions utilisateurs. |
| 6  | **Bcrypt**         | üîí Biblioth√®que pour hasher et s√©curiser les mots de passe des utilisateurs.                              |
| 7  | **Nodemailer**     | üìß Module pour l'envoi d'emails, utilis√© pour des fonctionnalit√©s comme la confirmation d'inscription.    |
| 8  | **Jest**           | üß™ Framework de tests pour JavaScript, utilis√© pour √©crire des tests unitaires et d'int√©gration.          |
| 9  | **Supertest**      | üåê Biblioth√®que pour tester les API HTTP en conjonction avec Jest.                                        |

### üìÅ Structure du Dossier Backend avec Tests :



- `/backend`
  - `/node_modules` : Dossier pour les modules Node.js install√©s.
  - `/config`
    - `db.config.js` : Configuration de la base de donn√©es.
  - `/controllers`
    - `utilisateurController.js` : G√®re les actions li√©es aux utilisateurs.
    - `trajetController.js` : G√®re les actions li√©es aux trajets.
    - `reservationController.js` : G√®re les actions li√©es aux r√©servations.
    - `commentaireController.js` : G√®re les actions li√©es aux commentaires.
  - `/models`
    - `utilisateurModel.js` : Mod√®le pour les utilisateurs.
    - `trajetModel.js` : Mod√®le pour les trajets.
    - `reservationModel.js` : Mod√®le pour les r√©servations.
    - `commentaireModel.js` : Mod√®le pour les commentaires.
  - `/routes`
    - `utilisateurRoutes.js` : Routes pour les actions sur les utilisateurs.
    - `trajetRoutes.js` : Routes pour les actions sur les trajets.
    - `reservationRoutes.js` : Routes pour les actions sur les r√©servations.
    - `commentaireRoutes.js` : Routes pour les actions sur les commentaires.
  - `/middlewares`
    - `authMiddleware.js` : Middleware pour l'authentification.
  - `/helpers`
    - `utilityHelper.js` : Fonctions utilitaires diverses.
  - `/tests`
    - `/controllers`
      - `utilisateurController.test.js` : Tests pour le contr√¥leur des utilisateurs.
      - `trajetController.test.js` : Tests pour le contr√¥leur des trajets.
      - `reservationController.test.js` : Tests pour le contr√¥leur des r√©servations.
      - `commentaireController.test.js` : Tests pour le contr√¥leur des commentaires.
    - `/models` : Tests pour les mod√®les (si n√©cessaire).
    - `/routes`
      - `utilisateurRoutes.test.js` : Tests pour les routes des utilisateurs.
      - `trajetRoutes.test.js` : Tests pour les routes des trajets.
      - `reservationRoutes.test.js` : Tests pour les routes des r√©servations.
      - `commentaireRoutes.test.js` : Tests pour les routes des commentaires.
  - `app.js` : Point d'entr√©e principal de l'application Node.js.
  - `package.json` : Fichier de gestion des packages Node.js.
  - `.env` : Fichier pour les variables d'environnement.
  - `.gitignore` : Fichier pour ignorer les fichiers/dossiers dans git.


## 

# User Stories :

| R√¥le | En tant que... | Je veux pouvoir... | Afin de... |
|------|----------------|--------------------|------------|
| Utilisateur | passager ou conducteur | m'inscrire avec mon email et un mot de passe | cr√©er mon compte personnel |
| Utilisateur | passager ou conducteur | me connecter √† mon compte | acc√©der aux fonctionnalit√©s personnalis√©es |
| Utilisateur | passager ou conducteur | mettre √† jour mon profil | modifier mes informations personnelles comme mon contact et ma photo |
| Conducteur | conducteur | publier des trajets avec tous les d√©tails n√©cessaires | que les passagers puissent les r√©server |
| Conducteur | conducteur | g√©rer mes trajets publi√©s | les modifier ou les supprimer si n√©cessaire |
| Passager | passager | rechercher des trajets disponibles | trouver un trajet qui convient √† mes pr√©f√©rences |
| Passager | passager | r√©server une place dans un trajet | et recevoir une confirmation de ma r√©servation |
| Utilisateur Authentifi√© | utilisateur authentifi√© | laisser une √©valuation et un commentaire apr√®s un trajet | partager mon exp√©rience avec la communaut√© |
| Administrateur | administrateur | voir tous les utilisateurs, trajets et r√©servations | g√©rer le syst√®me de covoiturage efficacement |

## 


# Mod√®le Conceptuel de Donn√©es (MCD) :

## 

![Description alternative](./MCD.svg "MCD du site de coivoituge local")



## Entit√©s :

| Entit√©       | Attributs                                             | Description                                                  |
|--------------|-------------------------------------------------------|--------------------------------------------------------------|
| Utilisateurs | `id`, `email`, `password`, `nom`, `contact`, `photo_url`, `role` | D√©tails des utilisateurs incluant les conducteurs et les passagers. |
| Trajets      | `id`, `conducteur_id`, `depart`, `arrivee`, `date_heure`, `places_disponibles`, `prix` | Informations sur les trajets offerts par les conducteurs.    |
| R√©servations | `id`, `trajet_id`, `passager_id`, `status`           | R√©servations effectu√©es par les passagers pour des trajets.  |
| √âvaluations  | `id`, `trajet_id`, `passager_id`, `note`, `commentaire` | √âvaluations laiss√©es par les passagers apr√®s un trajet.      |

## Relations et Cardinalit√©s :

| Relation   | Description                                                 |
|------------|-------------------------------------------------------------|
| Conduit    | Un **conducteur** (`Utilisateurs`) peut conduire plusieurs (`Trajets`). |
| R√©serve    | Un **passager** (`Utilisateurs`) peut r√©server plusieurs (`R√©servations`). |
| √âvalue     | Un **passager** (`Utilisateurs`) peut √©valuer plusieurs trajets (`√âvaluations`). |

| Cardinalit√©              | Description                                                                  |
|--------------------------|------------------------------------------------------------------------------|
| Utilisateurs √† Trajets   | Un utilisateur (conducteur) peut publier plusieurs trajets. Un trajet est publi√© par un seul utilisateur. |
| Utilisateurs √† R√©servations | Un utilisateur (passager) peut avoir plusieurs r√©servations. Une r√©servation est faite pour un seul utilisateur. |
| Trajets √† R√©servations   | Un trajet peut avoir plusieurs r√©servations. Une r√©servation concerne un seul trajet. |
| Trajets √† √âvaluations    | Un trajet peut avoir plusieurs √©valuations. Une √©valuation concerne un seul trajet. |
| Utilisateurs √† √âvaluations | Un utilisateur (passager) peut laisser plusieurs √©valuations. Une √©valuation est laiss√©e par un seul utilisateur. |


# Mod√®le Logique de Donn√©es (MLD) :

| Table         | Attribut           | Type                  | Contraintes                          |
|---------------|--------------------|-----------------------|--------------------------------------|
| **Utilisateurs** | `id`               | INT                   | PRIMARY KEY, AUTO_INCREMENT          |
|               | `email`            | VARCHAR(255)          | UNIQUE, NOT NULL                     |
|               | `password`         | VARCHAR(255)          | NOT NULL                             |
|               | `nom`              | VARCHAR(255)          | NOT NULL                             |
|               | `contact`          | VARCHAR(255)          |                                      |
|               | `photo_url`        | VARCHAR(255)          |                                      |
|               | `role`             | ENUM('passager', 'conducteur') | NOT NULL                |
| **Trajets**   | `id`               | INT                   | PRIMARY KEY, AUTO_INCREMENT          |
|               | `conducteur_id`    | INT                   | FOREIGN KEY REFERENCES Utilisateurs(id), NOT NULL |
|               | `depart`           | VARCHAR(255)          | NOT NULL                             |
|               | `arrivee`          | VARCHAR(255)          | NOT NULL                             |
|               | `date_heure`       | DATETIME              | NOT NULL                             |
|               | `places_disponibles` | INT                 | NOT NULL                             |
|               | `prix`             | DECIMAL(10, 2)        | NOT NULL                             |
| **R√©servations** | `id`             | INT                   | PRIMARY KEY, AUTO_INCREMENT          |
|               | `trajet_id`        | INT                   | FOREIGN KEY REFERENCES Trajets(id), NOT NULL |
|               | `passager_id`      | INT                   | FOREIGN KEY REFERENCES Utilisateurs(id), NOT NULL |
|               | `status`           | ENUM('confirm√©e', 'en attente', 'annul√©e') | NOT NULL     |
| **√âvaluations** | `id`             | INT                   | PRIMARY KEY, AUTO_INCREMENT          |
|               | `trajet_id`        | INT                   | FOREIGN KEY REFERENCES Trajets(id), NOT NULL |
|               | `passager_id`      | INT                   | FOREIGN KEY REFERENCES Utilisateurs(id), NOT NULL |
|               | `note`             | INT                   | NOT NULL                             |
|               | `commentaire`      | TEXT                  |                                      |




# API Endpoints :

| Cat√©gorie              | M√©thode HTTP | Endpoint                 | Description                                         |
|------------------------|--------------|--------------------------|-----------------------------------------------------|
| **Authentification**   | POST         | `/auth/register`         | Inscription d'un nouvel utilisateur.                |
|                        | POST         | `/auth/login`            | Connexion de l'utilisateur.                         |
| **Profil Utilisateur** | GET          | `/users/profile`         | Obtenir le profil de l'utilisateur connect√©.        |
|                        | PUT          | `/users/profile`         | Mettre √† jour le profil.                            |
| **Gestion des Trajets**| POST         | `/trajets`               | Publier un nouveau trajet.                          |
|                        | GET          | `/trajets`               | Lister les trajets disponibles.                      |
|                        | GET          | `/trajets/:id`           | D√©tails d'un trajet.                                |
|                        | PUT          | `/trajets/:id`           | Mettre √† jour un trajet.                            |
|                        | DELETE       | `/trajets/:id`           | Supprimer un trajet.                                |
| **Recherche et R√©servation** | GET    | `/trajets/search`        | Rechercher des trajets selon des crit√®res.          |
|                        | POST         | `/reservations`          | Cr√©er une nouvelle r√©servation.                     |
|                        | PUT          | `/reservations/:id`      | Mettre √† jour le statut de la r√©servation.          |
| **√âvaluations**        | POST         | `/evaluations`           | Ajouter une √©valuation pour un trajet.              |
|                        | GET          | `/evaluations`           | Lister les √©valuations.                             |
| **Administration**     | GET          | `/admin/users`           | Lister tous les utilisateurs.                       |
|                        | GET          | `/admin/trajets`         | Lister tous les trajets.                            |
|                        | GET          | `/admin/reservations`    | Lister toutes les r√©servations.                     |



## 

# üåê Technologies Frontend :

Bienvenue dans la section des technologies frontend utilis√©es pour le d√©veloppement de l'interface utilisateur de notre site de covoiturage. Chaque technologie est s√©lectionn√©e pour optimiser le d√©veloppement et offrir une exp√©rience utilisateur fluide et r√©active.

## üñ•Ô∏è Technologies Utilis√©es :

| #  | Technologie         | Description                                                                                              |
|----|---------------------|----------------------------------------------------------------------------------------------------------|
| 1  | **React**           | üèóÔ∏è Biblioth√®que JavaScript pour la construction d'interfaces utilisateur, utilis√©e pour cr√©er des vues dynamiques dans le navigateur. |
| 2  | **Vite.js**         | ‚ö° Outil de build moderne qui offre un d√©marrage rapide et des rechargements √† chaud pour les projets utilisant des modules ES.        |
| 3  | **React Router**    | üö¶ Biblioth√®que pour g√©rer le routage dans les applications React, essentielle pour une navigation fluide et conditionnelle.          |
| 4  | **Axios**           | üåç Client HTTP bas√© sur les promesses pour le navigateur et Node.js, utilis√© pour faire des requ√™tes HTTP efficaces.                  |
| 5  | **Formik**          | üìù Biblioth√®que pour la gestion des formulaires en React, facilitant la validation et le suivi des √©tats des champs.                    |
| 6  | **Yup**             | üîç Constructeur de sch√©ma pour la validation c√¥t√© client, souvent utilis√© avec Formik pour assurer l'int√©grit√© des donn√©es saisies.   |
| 7  | **Bootstrap**       | üé® Framework CSS pour d√©velopper rapidement des interfaces utilisateur r√©actives et attrayantes, r√©duisant le temps de stylisation.   |
| 8  | **Testing Library** | üß™ Ensemble d'outils de test pour aider √† √©crire des tests robustes pour les composants React, garantissant la fiabilit√© des composants. |
| 9  | **Jest**            | üìä Framework de tests JavaScript populaire pour les tests unitaires, assurant que le code respecte les fonctionnalit√©s attendues.       |

## üìÇ Structure du Dossier Frontend :



- `/frontend`
  - `/public`
    - `index.html` : Fichier HTML principal, point d'entr√©e du frontend
  - `/src`
    - `/assets` : Contient les ressources statiques comme les images et les styles
    - `/components` : Composants React
      - `/Auth`
        - `LoginForm.jsx` : Formulaire de connexion
        - `RegisterForm.jsx` : Formulaire d'inscription
      - `/User`
        - `UserProfile.jsx` : Affiche le profil de l'utilisateur
      - `/Trips`
        - `TripList.jsx` : Affiche la liste des trajets disponibles
        - `TripForm.jsx` : Formulaire pour la cr√©ation d'un trajet
        - `SearchForm.jsx` : Formulaire pour la recherche des trajets
      - `/Reservations`
        - `ReservationList.jsx` : Affiche la liste des r√©servations de l'utilisateur
      - `/Comments`
        - `CommentList.jsx` : Affiche tous les commentaires sur un trajet
        - `CommentForm.jsx` : Formulaire pour soumettre un nouveau commentaire
    - `/services` : Services pour la communication avec l'API
      - `authService.js` : G√®re l'authentification et la session utilisateur
      - `tripService.js` : G√®re les op√©rations li√©es aux trajets
      - `reservationService.js` : G√®re les op√©rations li√©es aux r√©servations
      - `commentService.js` : G√®re les op√©rations li√©es aux commentaires
    - `/hooks` : Hooks React personnalis√©s
    - `/utils` : Utilitaires
      - `config.js` : Configuration globale de l'application
      - `http.js` : Configuration et instances d'Axios pour les requ√™tes HTTP
    - `App.jsx` : Composant racine de l'application
    - `index.js` : Point d'entr√©e de l'application React
  - `/tests`
    - `/components` : Tests unitaires pour les composants
      - `/Auth`
        - `LoginForm.test.jsx`
        - `RegisterForm.test.jsx`
      - `/User`
        - `UserProfile.test.jsx`
      - `/Trips`
        - `TripList.test.jsx`
        - `TripForm.test.jsx`
        - `SearchForm.test.jsx`
      - `/Reservations`
        - `ReservationList.test.jsx`
      - `/Comments`
        - `CommentList.test.jsx`
        - `CommentForm.test.jsx`
    - `/services` : Tests pour les services qui communiquent avec l'API
      - `authService.test.js`
      - `tripService.test.js`
      - `reservationService.test.js`
      - `commentService.test.js`
  - `package.json` : G√®re les d√©pendances et scripts npm
  - `vite.config.js` : Configuration sp√©cifique √† Vite.js





## 

# üìÜ Planification Agile Scrum pour Lamastre-covoit :

planification d√©taill√©e du projet de covoiturage, structur√©e selon la m√©thode Agile Scrum avec une visibilit√© claire sur les activit√©s hebdomadaires et quotidiennes.

## üóì **Semaine 1 (25 - 29 Avril)**

### **üöÄ Jour 1 (Jeudi 25)**
- [ ] üéâ C√©r√©monie de lancement
- [ ] üìë Pr√©sentation du projet
- [ ] üîß Configuration des outils de d√©veloppement

### **üìÖ Jour 2 (Vendredi 26)**
- [ ] üìù Planification du Sprint 1
- [ ] üóí D√©finition des user stories
- [ ] üèó Cr√©ation des t√¢ches pour le backlog

### **üåû Weekend**
- [ ] üòå Repos

## üóì **Semaine 2 (30 Avril - 5 Mai)**

### **üë®‚Äçüíª Lundi √† Vendredi**
- [ ] üõ† D√©veloppement Sprint 1
  - üåê Mise en place de l'environnement de base
  - üèõ Architecture initiale
  - üóù D√©but de d√©veloppement des fonctionnalit√©s d'authentification et de profil utilisateur

## üóì **Semaine 3 (6 - 12 Mai)**

### **üîç Lundi**
- [ ] üìä Revue du Sprint 1
- [ ] üîÑ R√©trospective
- [ ] üóì Planification du Sprint 2

### **üë®‚Äçüíª Mardi √† Vendredi**
- [ ] üõ† D√©veloppement Sprint 2
  - üõ£ Fonctionnalit√©s de trajet
  - üéü Fonctionnalit√©s de r√©servation
  - üìã Affichage des listes

### **üåû Weekend**
- [ ] üòå Repos

## üóì **Semaine 4 (13 - 19 Mai)**

### **üë®‚Äçüíª Lundi √† Vendredi**
- [ ] üõ† Continuation du Sprint 2
  - üìù Finalisation des fonctionnalit√©s de r√©servation
  - üí¨ D√©veloppement des fonctionnalit√©s de commentaires

### **üåû Weekend**
- [ ] üòå Repos

## üóì **Semaine 5 (20 - 26 Mai)**

### **üîç Lundi**
- [ ] üìä Revue du Sprint 2
- [ ] üîÑ R√©trospective
- [ ] üóì Planification du Sprint 3

### **üë®‚Äçüíª Mardi √† Vendredi**
- [ ] üõ† D√©veloppement Sprint 3
  - üß™ Int√©gration et tests
  - üîç Impl√©mentation des fonctionnalit√©s de recherche
  - üé® Peaufinage de l'UI/UX

### **üåû Weekend**
- [ ] üòå Repos

## üóì **Semaine 6 (27 - 28 Mai)**

### **üë®‚Äçüíª Lundi**
- [ ] üèÅ Finalisation du d√©veloppement
- [ ] üß™ Tests d'acceptation
- [ ] üöÄ Pr√©paration au d√©ploiement

### **üîö Mardi (28)**
- [ ] üìä Revue finale
- [ ] üöÄ D√©ploiement
- [ ] üéâ Cl√¥ture du projet

## üìã **Kanban Board**

### **üìù Backlog**
- [ ] üîß Mise en place de l'environnement de d√©veloppement
- [ ] üìù D√©finition des user stories
- [ ] üñ• Configuration initiale des serveurs backend et frontend

### **üîß Sprint 1**
- [ ] üßë‚Äçüíª Impl√©mentation des mod√®les de donn√©es utilisateur
- [ ] üîó Cr√©ation des endpoints d'authentification
- [ ] üîê Mise en place du syst√®me d'authentification sur le frontend

### **üîß Sprint 2**
- [ ] üöó D√©veloppement des composants de trajets et r√©servations
- [ ] üì° Int√©gration de la gestion des r√©servations dans le backend
- [ ]
